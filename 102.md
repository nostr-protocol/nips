NIP-102
=======

Private Event
-------------

`draft` `optional` `author:arthurfranca`

This NIP defines a new client to relay message to send private events.

## Private Event

A private event has the same format of a regular event but it
is expected to be fetched just by allowed pubkeys. The relay is
trusted to use [NIP-43](43.md) to restrict access to the private
event.

## Message

The message is similar to the [NIP-01](01.md) `EVENT` message but
has a configuration array as an extra argument:

`["PRIVATE_EVENT", {<event JSON>}, [<configuration array>]]`

The message can be sent more than once by the event author
to change the configuration array.

## Access Control

The private event can be accessed by its `author`, by a `pubkey`
referenced in the configuration array or by `pubkeys` inside the
event referenced in the configuration array as `p` tags.

The user fetches events as usual with NIP-01 `REQ` message. Only allowed users authenticated to the relay using NIP-43 will
receive private events that match the filters.

## Configuration Array

The config array has atleast two items. The first is the identifier type and the second is the identifier value.

The identifier type can be `p`, `e` or `a`.

When `p`, the referenced pubkey value is allowed to access the private event.

Identifier value for `e` and `a` types may be any event that contains `p`
tags. These `p` tags are the users allowed to access the private event.

For example `e` and `a` can be a list or a group
creation/metadata event that contains `p` tags (both encrypted or not).
The event should be sent to the used relay.

Optionally, there is a third configuration array value with
a private key that can decrypt the `e` or `a` event referenced
as the second item using [NIP-44](44.md). Note that **this is not
the user private key**, but a disposable one. Similar to DMs,
the disposable or the author private key can decrypt the
referenced event content.

### Example

`["a", "<nip_51_list_address>", "<disposable_privkey>"]`
