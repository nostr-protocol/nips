# NIP-100

## Multi-NIP-05 Aliases in User Profiles

**Authors:** [imp0stor](https://github.com/imp0stor)
**Created:** 2025-07-28  
**Updated:** 2025-07-28  
**Status:** Draft
**License:** CC0-1.0  

### Abstract

This NIP proposes an extension to user profile metadata (kind 0 events) to support multiple NIP-05 identifiers as aliases. This allows users to associate a primary NIP-05 identifier with additional aliases from different domains or registrars, enabling better visibility, portability, and integration with platform-specific features like perks or short names. Clients can verify and display these aliases in user profiles, while maintaining backward compatibility with existing single-identifier setups. Short names remain an internal feature of individual registrars, translating back to full NIP-05 identifiers for Nostr interactions.

### Motivation

NIP-05 provides a mechanism for mapping Nostr public keys (npubs) to DNS-based identifiers (e.g., `user@domain.com`), enhancing discoverability and verification. However, it currently supports only a single identifier per profile in kind 0 metadata, limiting users who want to leverage multiple registrars for specialized perks (e.g., gaming integrations, social features) or maintain aliases across domains.

This leads to challenges:
- Users cannot easily display or manage multiple identifiers in their profiles, forcing manual workarounds like listing them in bios.
- Integrations with character-constrained platforms (e.g., game engines) benefit from registrar-internal short names, but these need to tie back to verifiable NIP-05 identifiers without fragmenting identity.
- Encouraging a ecosystem of multiple, low-cost registrars for curated perks requires protocol support for alias visibility to normalize sign-ups across providers.

By extending profiles to include aliases, this NIP improves user experience, promotes registrar competition, and supports use cases like mixing personal domains with third-party services, all while keeping short-name handling decentralized and registrar-specific.

Community discussions highlight the need for multi-NIP-05 support, with users expressing interest in multiple addresses for different contexts (e.g., work vs. personal) and calls for clients to implement it. Existing setups like BTCPay Server already allow multiple domains mapping to the same key, demonstrating practical demand.

### Specification

#### Extended Kind 0 Metadata

User profile events (kind 0) are extended with two new optional fields:
- `"nip05"`: Remains the primary NIP-05 identifier (string), for backward compatibility.
- `"nip05_aliases"`: An array of objects, each representing an alias with its identifier and optional metadata.

Example kind 0 content JSON:
```json
{
  "name": "Example User",
  "about": "Nostr enthusiast",
  "picture": "https://example.com/profile.jpg",
  "nip05": "primary@personal.com",
  "nip05_aliases": [
    {
      "identifier": "imp0stor@gamingregistrar.com",
      "perks": ["gaming-integration", "short-name-support"],
      "description": "Alias for gaming perks"
    },
    {
      "identifier": "alice@socialregistrar.com",
      "perks": ["social-badges"],
      "description": "Alias for social features"
    }
  ]
}
```

- **Fields in `nip05_aliases` objects**:
  - `"identifier"` (required, string): The full NIP-05 alias (e.g., `user@domain.com`).
  - `"perks"` (optional, array of strings): Tags describing registrar-specific offerings (e.g., ["gaming", "badges"]). This helps clients display or filter aliases based on use cases.
  - `"description"` (optional, string): A user-provided note about the alias (max 280 characters).

The total number of aliases SHOULD be limited to 100 per profile to prevent abuse, enforced by clients and relays as a soft guideline. This higher limit accommodates extensive use cases, such as platforms offering NIP-05 for user management across many services, while the domain requirement for valid aliases provides a natural barrier to spam.

#### Verification

Clients MUST verify each alias independently by querying the respective domain's `/.well-known/nostr.json` file, as per NIP-05. Verification failures (e.g., mismatch with the event's pubkey) SHOULD be indicated in the UI (e.g., no checkmark or a warning icon).

For the primary `"nip05"`, verification remains unchanged. Aliases are optional and do not affect primary validation.

Relays MAY index aliases for faster lookups but are not required to; verification is client-side.

#### Display in Clients

Clients SHOULD display the primary NIP-05 with a verification checkmark in the main profile view. Aliases SHOULD be shown in a dedicated section (e.g., "Aliases" dropdown or list), with:
- The full identifier.
- Perk tags as badges or tooltips.
- Verification status.

When searching or mentioning users, clients MAY resolve aliases alongside the primary.

#### Optional Alias Management Events

To enable dynamic updates without always replacing kind 0 events, a new event kind (e.g., kind 10005) is introduced for alias claims:

- **Kind 10005: NIP-05 Alias Update**
  - Tags:
    - `["alias", "<identifier>", "<action>"]` where `<action>` is "add" or "remove".
    - Optional `["perk", "<perk-tag>"]` repeated for each perk.
  - Content: Optional description.
  - Example:
    ```json
    {
      "kind": 10005,
      "tags": [
        ["alias", "newalias@domain.com", "add"],
        ["perk", "gaming"],
        ["perk", "short-name-support"]
      ],
      "content": "Adding gaming alias"
    }
    ```

Clients can subscribe to these events from a user's pubkey to build a current list of aliases, merging with kind 0 data.

#### Registrar-Internal Short Names

This NIP does not define short names; they are handled internally by registrars for their own use or integrations:
- A registrar enforces uniqueness for short local-parts (e.g., "alice") within their domain.
- In their platforms (e.g., games), they display the short name for brevity, which can be derived from the NIP-05 identifier (e.g., the part before "@").
- All Nostr interactions use the full NIP-05 (e.g., "alice@registrar.com").

### Rationale

- **Decentralization**: Aliases remain domain-scoped, avoiding global uniqueness issues. Registrars control their internals, aligning with Nostr's ethos.
- **Usability**: Profile visibility of aliases encourages multi-registrar use, lowering barriers for perks and integrations.
- **Extensibility**: Perk tags allow future innovations without protocol changes.
- **Minimal Overhead**: Builds directly on NIP-05; no new relay requirements beyond optional indexing.
- **Limit Adjustment**: A limit of 100 balances abuse prevention with usefulness, as each alias requires domain control, making mass abuse costly. This supports scenarios where users manage aliases across 50-100+ platforms for diverse user management needs.

### Backward Compatibility

- Old clients ignore `"nip05_aliases"` and kind 10005, seeing only the primary `"nip05"`.
- Existing single-NIP-05 profiles work unchanged.
- If a user adds aliases, new clients benefit while old clients remain functional.

### Security Considerations

- **Abuse**: The 100-alias limit acts as a soft cap; clients SHOULD warn on unverified or excessive aliases.
- **Impersonation**: Verification ties aliases to the pubkey, but users SHOULD only add controlled identifiers.
- **Privacy**: Aliases are public; users can remove them via kind 10005.
- **DoS**: Relays MAY rate-limit kind 10005 events.

### Reference Implementation

None yet; this is a draft. Implementers are encouraged to prototype in clients like Primal or Snort, with relay support in nosk or strfry.
