# NIP-100: NostrReAction - Unified Interactions and Content Evolution

## 1. Abstract

This NIP introduces `NostrReAction` (NostrRA), a new protocol designed to unify "like", "share", and "reply"
interactions within the Nostr network. By consolidating these actions, including replies as content modifications,
into a single event type, leveraging IPFS for larger content, and implementing a notification mechanism,
`NostrReAction` aims to reduce network load, enhance content discoverability, simplify the user experience,
and establish a robust validation chain for content evolution. This unified approach ensures that all users
are notified of actions on their content and that the content with the greatest validation can be selected as
the main content.

## 2. Introduction

Current Nostr interactions like "like," "share," and "reply" often generate separate events, leading to
redundancy and a fragmented user experience. `NostrReAction` addresses this by creating a unified event
type that handles these actions as content interactions. This proposal emphasizes notifying content owners
about actions and content evolution, ensuring a transparent and consensual process for managing content.
Every interaction on an event is considered as a signature for a specific version of the content.
By gathering all interactions, you can then use an algorithm to present the content with the most "influence".

## 3. Goals

*   **Reduce Network Traffic:** Minimize the number of events by merging different interaction types into a single event.
*   **Enhance Content Discovery:** Improve content discoverability by aggregating interaction data and establishing a clear validation chain.
*   **Simplify User Experience:** Create a more cohesive and consistent interaction experience.
*   **Support Long Content:** Enable efficient handling of large content by leveraging IPFS CIDs.
*   **Preserve Content Integrity:** Ensure content integrity through a validation mechanism, allowing content to evolve while keeping a clear history.
*   **Establish a Validation Chain:** Provide mechanisms to accumulate validations on identical content based on a defined set of rules.
*   **Notify Content Owners:** Ensure content owners are informed of all actions on their content to maintain consistency.
*    **Content evolution**: Content owners and other users can propose modifications on a content and the author has a way to control the evolution.

## 4. Specification

### 4.1. Event Kinds:

*   **`kind: 10037`**: `NostrReAction` (NostrRA) event.
*   **`kind: 10038`**: Notification event for NostrReAction.

### 4.2. Tags:

**For `kind: 10037` (NostrRA):**

*   **`["original_event_id", <event_id_source>]` (required)**: The ID of the original event being interacted with.
*   **`["original_author_info", <pubkey_source>, <relay_url_source>]` (required)**: The pubkey and relay URL where the original event was published.
*   **`["action_type", <action_type>]` (required)**: The type of interaction: `like`, `share`, or `modify`.
*   **`["reply_to_event_id", <event_id_reply>]` (optional)**: The ID of the event being replied to, only if `action_type` is `reply`.
*   **`["ipfs_cid", <cid_ipfs>]` (optional)**: The IPFS CID for the content, if the `content` is larger than a certain limit.
*   **`["original_content_hash", <hash_content_original>]` (optional)**: The hash of the original `content`, used when `action_type` is `modify` or `reply`.
*   **`["reply_text", <texte_reply>]` (optional)**: Text of the reply, used when `action_type` is `reply`, when the reply is short.
*   **`["theme", <tag_value>]` (optional, multiple))**: A tag to describe the theme or topic of the event (can be multiple, for example `["theme", "nostr"], ["theme", "technology"]`).
*   **`["language", <languages>]` (optional, multiple)**: List of languages, e.g., ["language", "en"], ["language", "fr"].
*   **`["validate", <event_id_modify>]` (optional)**: If the action is `validate`, the ID of the event to validate.
*   **`["refuse", <event_id_modify>]` (optional)**: If the action is `refuse`, the ID of the event to refuse.

**For `kind: 10038` (Notification):**

*   **`["original_event_id", <event_id_source>]` (required)**: The ID of the original event.
*   **`["original_author_info", <pubkey_source>, <relay_url_source>]` (required)**: The pubkey and relay URL of the content owner.
*   **`["repost_event_id", <event_id_repost>]` (required)**: The ID of the `NostrRA` event causing the notification.
*   **`["modify_event_id", <event_id_modify>]` (optional)**: If the notification is about a content modification, the ID of the `NostrRA` proposing the modification.

### 4.3. Action Types (`<action_type>`)

*   **`like`**: Indicates a "like" action (no additional content).
*   **`share`**: Indicates a "share" action (no additional content).
*   **`reply`**: Indicates a "reply" action.
*   **`modify`**: Indicates a proposal to modify the original content.
*   **`validate`**: Indicates that a proposed modification is validated.
*   **`refuse`**: Indicates that a proposed modification is refused.

### 4.4. Content (`content`)

**For `kind: 10037` (NostrRA):**

*   If `action_type` is `like` or `share`, the `content` MAY be empty or contain a brief message.
*   If `action_type` is `reply`:
    *   If the reply is short (under 140 characters), the `content` contains the text of the reply.
    *   If the reply is longer than 140 characters, the `content` contains `ipfs://<cid_ipfs>`.
*  If  `action_type` is `modify` :
     *   The `content` is the new `content` or `ipfs://<cid_ipfs>` if the new `content` is long.

**For `kind: 10038` (Notification):**

*   The `content` SHOULD be empty.

## 5. Workflow

1.  **Create a Reaction or Modification:**
    *   A user performs a "like," "share," or "reply" action on an event, or proposes a modification.
    *   An event of `kind: 10037` (`NostrRA`) is created with the correct `action_type`, `tags`, and formatted `content`.
        *   When a modification is proposed (including a reply), `original_content_hash` must contain a hash of the original `content`.
    *   An event of `kind: 10038` (Notification) is created to notify the content owner of this action.
    *   Both the `NostrRA` and the notification events are signed and published to the relays.

2.  **Receive `NostrRA` Event and Notification:**
    *   Relays receive the `NostrRA` event and the `Notification` event.
    *   Clients following the original event receive the `NostrRA` event and clients following the content owner receive the `Notification` event.

3.  **Content Validation and Evolution:**

    *   Content owners receive notifications of all interactions with their content. This allows content owners to keep a full history of all changes to their content and the validations related.
    *   When a modification is proposed (action type = `modify` or `reply`), content owners can review and validate the change by:
        *   Creating a `NostrRA` event with type `validate` to approve a proposed modification, or type `refuse` to reject the modification.
        *   Once approved, the new version is considered the main version.
       *  If the modification is refused, the original content will be used, until a new modification has been proposed and validated.

4. **Content Selection :**
  * An event is considered valid if and only if it has an associated `NostrRaAction` with `validate` and it must be from the original author.
   * The validated event is the reference for the "main version" of the content, this can be used to sort a list by influence.
   * Clients can choose to implement other algorithms to select the best version if they need different approach.

## 6. Examples

#### 6.1. Example: Like Action

```json
{
  "id": "6e987b011d667b71a32e48c97910d09104af21a3f26b1e0c09047f1d8e586f64",
  "pubkey": "2a2427f7e14721a98016c4e17c7d47252c7f9a9a48a2121b0704b8b434a3f873",
  "created_at": 1678956789,
  "kind": 10037,
  "tags": [
    ["original_event_id", "4f6a5d8c2b4d1a3e9f7c5b8a7d6e4c3b2a1f0e9d8c7b6a5f4e3d2c1b0a9f8e7d"],
    ["original_author_info", "4f6a5d8c2b4d1a3e9f7c5b8a7d6e4c3b2a1f0e9d8c7b6a5f4e3d2c1b0a9f8e7d", "wss://relay.example.com"],
    ["action_type", "like"]
  ],
  "content": "",
  "sig": "..."
}
```

```json
{
    "id": "event_id_notification_1",
    "pubkey": "pubkey_notification",
    "created_at": 1678886402,
    "kind": 10038,
    "content": "",
    "tags": [
        ["original_event_id", "4f6a5d8c2b4d1a3e9f7c5b8a7d6e4c3b2a1f0e9d8c7b6a5f4e3d2c1b0a9f8e7d"],
        ["original_author_info", "4f6a5d8c2b4d1a3e9f7c5b8a7d6e4c3b2a1f0e9d8c7b6a5f4e3d2c1b0a9f8e7d", "wss://relay.example.com"],
        ["repost_event_id", "6e987b011d667b71a32e48c97910d09104af21a3f26b1e0c09047f1d8e586f64"]
     ],
    "sig": "..."
}
```

#### 6.2. Example: Reply Action (short)

```json
{
  "id": "6e987b011d667b71a32e48c97910d09104af21a3f26b1e0c09047f1d8e586f65",
  "pubkey": "b23447f7e14721a98016c4e17c7d47252c7f9a9a48a2121b0704b8b434a3f873",
  "created_at": 1678956790,
  "kind": 10037,
  "tags": [
      ["original_event_id", "4f6a5d8c2b4d1a3e9f7c5b8a7d6e4c3b2a1f0e9d8c7b6a5f4e3d2c1b0a9f8e7d"],
      ["original_author_info", "4f6a5d8c2b4d1a3e9f7c5b8a7d6e4c3b2a1f0e9d8c7b6a5f4e3d2c1b0a9f8e7d", "wss://relay.example.com"],
      ["action_type", "reply"],
    ["reply_to_event_id", "1234567890abcdef..."],
        ["original_content_hash", "hash_original"]
  ],
  "content": "That's great!",
   "sig": "..."
}
```

```json
{
    "id": "event_id_notification_2",
    "pubkey": "pubkey_notification",
    "created_at": 1678886402,
    "kind": 10038,
    "content": "",
   "tags": [
        ["original_event_id", "4f6a5d8c2b4d1a3e9f7c5b8a7d6e4c3b2a1f0e9d8c7b6a5f4e3d2c1b0a9f8e7d"],
         ["original_author_info", "4f6a5d8c2b4d1a3e9f7c5b8a7d6e4c3b2a1f0e9d8c7b6a5f4e3d2c1b0a9f8e7d", "wss://relay.example.com"],
        ["repost_event_id", "6e987b011d667b71a32e48c97910d09104af21a3f26b1e0c09047f1d8e586f65"]
    ],
    "sig": "..."
}
```

#### 6.3. Example: Reply Action (long)

```json
{
  "id": "6e987b011d667b71a32e48c97910d09104af21a3f26b1e0c09047f1d8e586f66",
  "pubkey": "2b2427f7e14721a98016c4e17c7d47252c7f9a9a48a2121b0704b8b434a3f873",
  "created_at": 1678956791,
  "kind": 10037,
  "tags": [
    ["original_event_id", "4f6a5d8c2b4d1a3e9f7c5b8a7d6e4c3b2a1f0e9d8c7b6a5f4e3d2c1b0a9f8e7d"],
      ["original_author_info", "4f6a5d8c2b4d1a3e9f7c5b8a7d6e4c3b2a1f0e9d8c7b6a5f4e3d2c1b0a9f8e7d", "wss://relay.example.com"],
    ["action_type", "reply"],
        ["reply_to_event_id", "1234567890abcdef..."],
    ["ipfs_cid", "QmY7i5j..."],
        ["original_content_hash", "hash_original"]
  ],
  "content": "ipfs://QmY7i5j...",
  "sig": "..."
}
```

```json
{
    "id": "event_id_notification_3",
    "pubkey": "pubkey_notification",
    "created_at": 1678886402,
    "kind": 10038,
    "content": "",
   "tags": [
        ["original_event_id", "4f6a5d8c2b4d1a3e9f7c5b8a7d6e4c3b2a1f0e9d8c7b6a5f4e3d2c1b0a9f8e7d"],
         ["original_author_info", "4f6a5d8c2b4d1a3e9f7c5b8a7d6e4c3b2a1f0e9d8c7b6a5f4e3d2c1b0a9f8e7d", "wss://relay.example.com"],
        ["repost_event_id", "6e987b011d667b71a32e48c97910d09104af21a3f26b1e0c09047f1d8e586f66"]
    ],
    "sig": "..."
}
```

#### 6.4. Example: Modification

```json
{
     "id": "event_id_repost_modify_1",
    "pubkey": "pubkey_reposter_2",
    "created_at": 1678886403,
    "kind": 10037,
     "content": "Hello, Universe!",
    "tags": [
        ["original_event_id", "4f6a5d8c2b4d1a3e9f7c5b8a7d6e4c3b2a1f0e9d8c7b6a5f4e3d2c1b0a9f8e7d"],
        ["original_author_info", "4f6a5d8c2b4d1a3e9f7c5b8a7d6e4c3b2a1f0e9d8c7b6a5f4e3d2c1b0a9f8e7d", "wss://relay.example.com"],
        ["action_type", "modify"],
        ["original_content_hash", "hash_original"]
   ],
    "sig": "..."
}
```

```json
{
        "id": "event_id_notification_4",
        "pubkey": "pubkey_notification",
        "created_at": 1678886404,
        "kind": 10038,
       "content": "",
       "tags": [
        ["original_event_id", "4f6a5d8c2b4d1a3e9f7c5b8a7d6e4c3b2a1f0e9d8c7b6a5f4e3d2c1b0a9f8e7d"],
         ["original_author_info", "4f6a5d8c2b4d1a3e9f7c5b8a7d6e4c3b2a1f0e9d8c7b6a5f4e3d2c1b0a9f8e7d", "wss://relay.example.com"],
         ["repost_event_id", "event_id_repost_modify_1"],
        ["modify_event_id", "event_id_repost_modify_1"]
      ],
        "sig": "..."
  }
```
#### 6.5. Example : validation

```json
{
    "id": "event_id_repost_validate_1",
    "pubkey": "4f6a5d8c2b4d1a3e9f7c5b8a7d6e4c3b2a1f0e9d8c7b6a5f4e3d2c1b0a9f8e7d",
    "created_at": 1678886405,
    "kind": 10037,
     "content": "",
    "tags": [
      ["original_event_id", "4f6a5d8c2b4d1a3e9f7c5b8a7d6e4c3b2a1f0e9d8c7b6a5f4e3d2c1b0a9f8e7d"],
       ["original_author_info", "4f6a5d8c2b4d1a3e9f7c5b8a7d6e4c3b2a1f0e9d8c7b6a5f4e3d2c1b0a9f8e7d", "wss://relay.example.com"],
       ["action_type", "validate"],
       ["validate", "event_id_repost_modify_1"]
       ],
    "sig": "..."
}
```

## 7. Advantages

*   **Enhanced Content Ownership:** Content owners are notified of all interactions and changes related to their content.
*   **Content Validation:** Ensures a clear validation chain through notifications and explicit approval mechanisms.
*   **Improved Content Integrity:** The use of IPFS CIDs and hashes allows for validation that the content is identical.
*   **Robust Content Management:** Enables users to collaboratively build upon each other's content, while ensuring the content owner's control.
*   **Content ranking:** ranking is done based on the number of validation signatures on a content version.

## 8. Disadvantages

*   **Increased Complexity:** Implementing both `NostrRA` events and handling notifications might increase the complexity of clients.
*   **Additional Traffic:** The additional notification events might add to network traffic (relay can delete).

## 9. Comparison with Other Nostr NIPs

Here's how NIP-100 stacks up against some relevant existing NIPs:

*   **NIP-01 (Basic Protocol):** NIP-100 builds upon the foundational event structure defined in NIP-01. It introduces new `kind` values (10037 and 10038), tags, and content formats, but adheres to the core principles of event signing and relaying. It's not *competing* with NIP-01; it's an extension.
*   **NIP-02 (Contact List):** NIP-02 is about social connections. NIP-100 is orthogonal to this; it's focused on content interactions. The two can coexist, and contact lists can be used to inform which content to view or follow.
*   **NIP-10 (Event Deletion):** NIP-10 allows the deletion of events. While relevant to content management, NIP-10 and NIP-100 are separate concepts. NIP-100 provides a *validation* mechanism to build content evolution, while NIP-10 is about permanent deletion.
*   **NIP-15 (End-to-End Encryption):** NIP-15 is about privacy. NIP-100 focuses on content evolution and interaction management and is orthogonal to NIP-15, you can send encrypted content with NIP-100.
*   **NIP-23 (Long-form Content):** NIP-23 is about structuring and formatting long-form content. NIP-100 addresses the *interaction* with such content and it is related as it is using IPFS as well, it can be used in conjunction, but they are not in conflict.
*    **NIP-25 (Reactions):** NIP-25 introduced basic reactions ("likes"). NIP-100 *replaces* this with a more general interaction type, combining likes with other actions (share, reply, modify) and adding a notification system and a validation mechanism. NIP-100 offers a much richer feature set than NIP-25.
*    **NIP-47 (Wallet Interaction):** NIP-47 is about interaction with Lightning wallets.  These are orthogonal and can co-exist.  You could even use NIP-47 to pay for access to content that has been curated through NIP-100.
*    **NIP-50 (Content Search):**  NIP-50 is about enabling content search by indexers.  NIP-100 can be easily indexed using a "theme" tag for better discoverability.

**Key Benefits of NIP-100 (Compared to Current State and Existing NIPs):**

*   **Unified Interaction:** NIP-100 consolidates likes, shares, replies, and modifications into a single event type, reducing network overhead, simplifying client-side development, and enhancing UX. This eliminates the current scattering of interaction events.
*   **Content Evolution & Ownership:** NIP-100 introduces a powerful mechanism for content evolution, allowing for structured co-creation and content refinement with the explicit consent of the original author. The content owner maintains control over modifications, ensuring a more collaborative and consensual process than simple replies.
*   **Built-in Validation:** By requiring validations from the original author for modified content, NIP-100 establishes a clear validation chain, making it easier to determine which version of the content is considered "official" or of greater "influence". This significantly improves content integrity and trust compared to current methods.
*   **Notification System:**  The notifications to content owners about all actions taken on their content empower them to have full control over how their content is being shared, modified, and presented.
*   **Leveraging IPFS:** The use of IPFS enables the handling of larger content without overloading the Nostr network, addressing a significant limitation.
*   **Co-Signed Content:** the validation allows multiple user to co-sign on content as a community. This can bring powerful mechanism of content curation, content creation and content evolution.

**Strong, Evolutive Path Forward: Co-Signed Content and Beyond**

NIP-100 lays the groundwork for some very powerful evolutionary features, especially in the realm of co-signed content and community-driven content development:

1.  **Collaborative Content Creation:**
    *   **Multi-Author Modification:** Extend NIP-100 to allow multiple authors to propose modifications. The original author could then choose the "best" of several suggestions, or even accept multiple modifications.
    *   **Community Validation:** Introduce community-based validation rules. A content owner could delegate some of the validation power to certain pubkeys, establishing a "moderation team". They could also let the community vote on modifications using an algorithm like quadratic voting and then validate the result.
2.  **Content Forking and Versioning:**
    *   **Explicit Forking Mechanism:** A new `action_type` could be introduced called `fork`. This event can include a whole new version of the document. The original author can select what version is the canonical one for the initial event.
    *   **Content Branching:** Allow clients to visualize content as a tree, with each validated modification as a branch. Users could choose to follow one or several branches.
3. **Beyond simple validation:**
  *  **Content Licensing :** Introduce licensing mechanism (e.g Creative Common) inside the tags, to formalize how a content can be used.
  *  **Content Provenance:**  Integrate more mechanisms to track the origin and history of a content, allowing to trace back to the "root" event.
  *  **Reputation System:** Build on top of the validation mechanism and create a kind of "reputation" system,  if an author is known to only provide value, we can give more trust to his content.
4.  **Content Curation:**
    *   **Curated Feeds:** Allow users to create curated feeds based on validated content, using tags.
    *   **Content Aggregation:**  Introduce a specific kind of event that allows users to "aggregate" different content under a topic to create some kind of "magazine".
5.  **Monetization and Incentives:**
    *   **Content Revenue Sharing:**  The validation mechanism can be used to build some kind of revenue sharing. If an author is providing a modification, he can ask a reward.

## 10. Considerations

*   **Client Implementation:** Clients MUST handle new `kind: 10037` and `kind: 10038` events.
*   **Relay Implementation:** Relays MUST accept and relay `kind: 10037` and `kind: 10038` events.
*   **Content Validation:** Clients should implement a robust method to validate content by analyzing the validation chain of events.

## 11. Conclusion

`NostrReAction` provides a new approach to handling common interactions in Nostr, ensuring content owners are informed of, and can participate in, the reuse and evolution of their content. This system should lead to more valuable interactions while preserving the core principles of Nostr by building a robust validation chain.

NIP-100 is a significant step towards a more robust, interactive, and collaborative Nostr network.
It is not just a minor improvement, it solves major challenges in content management.
Its unified interaction model, combined with robust validation mechanisms and IPFS support,
paves the way for collaborative content creation and content management.
It can be a big move toward a more community-driven internet. By implementing the suggested evolution,
Nostr could become a much more powerful and dynamic platform for content sharing and innovation.

The key here is to see content not as static, but as a flow, an evolution, a life, and NIP-100 is designed for this type of paradigm.
