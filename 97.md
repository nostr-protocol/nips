NIP-97
======

Content Recommendation Services
-------------------------------

`draft` `optional` `author:vitorpamplona`

## Abstract

Service providers can offer event recommendations to users that subscribe to it. Specifics of the recommendation algorithms will differ between event kinds and provider implementations. This NIP describes a general extensible framework for subscribing and performing recommendation requests.

# Recommendation Subscriptions list

A special event with kind `10020` "Recommendation Subscription List" is defined as a [NIP-16 - Replaceable Events](16.md) of public and/or private `p` tags, one for each of the subscribed services the author is following. Each tag entry should contain the public key for the service provider and a relay URL where the provider hosts the recommendation events. i.e., `["p", <32-bytes hex key>, <main relay URL>]`. 

For example:

```json
{
  "kind": 10020,
  "tags": [
    ["p", "91cf9..4e5ca", "wss://provider1.com/"],
    ["p", "14aeb..8dad4", "wss://provider2.com/nostr"],
    ["p", "612ae..e610f", "ws://provider3.com/ws"]
  ],
  "content": "<private list>",
  ...other fields
}
```

# Recommendation Request

Clients can request recommendations at will using the ephemeral event with kind `20020`. `p` tags in this event contain the group of users to make the recommendation for and the `.content` field contains an array of NOSTR `REQ` filters ([NIP-1 - Basic Protocol](1.md)) that describe the type and constraints of the requested recommendation. 

```json
{
  "kind": 20020,
  "tags": [
    ["p", "91cf9..4e5ca", "wss://relay1.com"],
  ],
  "content": "[<FILTER1>, <FILTER2>, ...]",
  ...other fields
}
```

Clients may specify several recommendation filters, i.e. `[{ "kinds": [1, 2]}, { "#p": ["91cf9..4e5ca"], limit 200}, ...]`. Clients may include `kinds`, `tags` and other filter field to restrict recommendation results to particular event kinds.

Providers SHOULD interpret the recommendation request to the best of their ability and return events that it deems interesting to the requesting pubkeys individually. Recommendations can also include trending events as long as the they are deemed of interest to each user. 

Clients MAY send `requests` to any provider or to just the select few the user is interested at the moment. 

# Recommendation Response

Providers respond with an ephemeral event with kind `20021` that contains tags to the recommended events. 

```json
{
  "kind": 20021,
  "tags": [
    ["e", "91cf9..4e5ca", "wss://alicerelay.com/"],
    ["e", "14aeb..8dad4", "wss://bobrelay.com/nostr"],
    ["e", "612ae..e610f", "ws://carolrelay.com/ws"]
  ],
  ...other fields
}
```

Clients SHOULD consider the list sorted by insterest strength. Clients MAY verify that events returned by provider match the specified interest in a way that suits the client's use case, and MAY stop querying providers that have low precision.

Providers are not required to sustain consistency. Every reply can be a new list. 

Service providers MAY exclude spam and reported events from results.

# Use Cases

Two common use cases are Kind=1 recommendations for a text-oriented social media app and NIP-94 events for a picture or video feed. 
