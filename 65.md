NIP-65
======

Relay List Metadata
-------------------

`draft` `optional` `author:mikedilger`

A special replaceable event meaning "Relay List Metadata" is defined as an event with kind `10002` having a list of `r` tags, one for each relay the author uses to either read or write to.

The primary purpose of this relay list is to advertise to others, not for configuring one's client.

The `content` is not used and SHOULD be an empty string.

The `r` tags can have a second parameter as either `read` or `write`. If it is omitted, it means the author uses the relay for both purposes.

Clients SHOULD, as with all replaceable events, use only the most recent kind-10002 event they can find.

### The meaning of read and write

Write relays are designed for broadcasting general events to a wider audience (for example, to your followers), while read relays are tailored to communicate specific events to a particular individual.

Clients are advised to post any feed-related events, initiated by their user, onto their user's write relays.

Clients are encouraged to fetch feed-related events authored by others from at least a selection of that individual's write relays. It should be understood that they should not anticipate these events to be accessible via their user's read relays. Additionally, it should not be assumed that the user's read relays align with the write relays of the individuals they follow.

Clients are advised to source events that involve their user directly from their user's read relays.

Clients are encouraged to post events that directly involve an individual to at least a few of that individual's read relays. It should be clearly understood that clients should not expect the involved individual to receive these from their user's write relays. Also, it should not be assumed that the user's write relays overlap with the read relays of the person involved in the event.

Clients are encouraged to assume that if their user has included a pubkey in their ContactList (type 3), it is due to their interest in seeing that author's feed-related events. However, clients are allowed to make different assumptions.

### Motivation

A prevalent scenario in the use of Nostr involves users desiring to keep track of the content generated by others. This can be inferred from the intended function of the Contact List in [NIP-02](02.md)

However, as users seldom share identical sets of relays, various makeshift solutions have been developed to obtain desired content. Unfortunately, these approaches adversely affect both scalability and decentralization:

  - Most people are sending their posts to the same most popular relays in order to be more widely seen
  - Many people are pulling from a large number of relays (including many duplicate events) in order to get more data
  - Events are being copied between relays, oftentimes to many different relays

### Purposes

The purpose of this NIP is to help clients find the events of the people they follow, to help tagged events get to the people tagged, and to help nostr scale better.

### Suggestions

It is suggested that people spread their kind `10002` events to many relays, but write their normal feed-related events to a much smaller number of relays (between 2 to 6 relays). It is suggested that clients offer a way for users to spread their kind `10002` events to many more relays than they normally post to.

Authors may post events outside of the feed that they wish their followers to follow by posting them to relays outside of those listed in their "Relay List Metadata".  For example, an author may want to reply to someone without all of their followers watching.

It is suggested that relays allow any user to write their own kind `10002` event (optionally with AUTH to verify it is their own) even if they are not otherwise subscribed to the relay because

  - finding where someone posts is rather important
  - these events do not have `content` that needs management
  - relays only need to store one replaceable event per pubkey to offer this service

### Why not in kind `0` Metadata

Even though this is user related metadata, it is a separate event from kind `0` in order to keep it small (as it should be widely spread) and to not have `content` that may require moderation by relay operators so that it is more acceptable to relays.

### Example

```json
{
  "kind": 10002,
  "tags": [
    ["r", "wss://alicerelay.example.com"],
    ["r", "wss://brando-relay.com"],
    ["r", "wss://expensive-relay.example2.com", "write"],
    ["r", "wss://nostr-relay.example.com", "read"],
  ],
  "content": "",
  ...other fields
```
