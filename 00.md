NIP-00
======

Editable Event
--------------

`draft` `optional`

The `dd` (deduplication) tag informs which one-letter tags of an event
should be used to uniquely identify an event besides the event's
`.kind` and `.pubkey` fields.

That is, when a relay receives a request to store an event with a `dd` tag set to e.g. `"ab"`
(meaning `a` and `b` tags), if there's already a stored event with the **same** `a` and `b` tags'
values, `.kind` and `.pubkey`, but with an older `.created_at` timestamp,
the old event must be replaced with the new one.

If the timestamps are the same, the event with the lowest id (first in lexical order)
should be retained, and the other discarded.

## "dd" Tag

The `dd` tag is set as follows: `["dd", "<one-letter tag name list>"]`.

The tag list can't repeat letters. Each listed tag must appear only once as an event tag.

- Examples with a single `e` tag: `["dd", "e"]`
- Example with three tags: `["dd", "eap"]`

### Editable Event example:

```jsonc
{
  "kind": 99,
  "pubkey", "827ade3254c72ae811201b418766d9a8802e91b029d95cc9de2f0169274aedd7",
  "tags": [
    // relay will check for other events with j tag = "12", z tag = "zz",
    // kind = 99 and same .pubkey, before storing this event
    ["dd", "jz"],
    ["j", "12"],
    ["c", "abc"],
    ["z", "zz"],
    ["status", "ok"]
  ],
  // ...other fields
}
```

## Referencing

An `u`(unique) tag is used for referencing the latest version of an editable event and has the following value format:
"`<event kind>:<event pubkey>:<tag name><tag value>`" or
"`<event kind>:<event pubkey>:<tag name><tag value><delimiter><tag name><tag value><delimiter>...`"

The delimiter between tag name/value pairs is the tilde char ("\~"). If a tag value used on
an `u` tag contains a tilde, the "\~" char should be escaped with a preceding "-".

### Example:

Referencing three editable events:

```jsonc
{
  "kind": 100,
  "pubkey", "38cdb0e540bc08beb647c7d786c2a3efa9348f9dbbfa66b55959f150310ced1a",
  "tags": [
    ["u", "99:827ade3254c72ae811201b418766d9a8802e91b029d95cc9de2f0169274aedd7:j12~zzz"], // j tag = "12" and z tag = "zz"
    ["u", "102:827ade3254c72ae811201b418766d9a8802e91b029d95cc9de2f0169274aedd7:b908908098"], // b tag = "908908098"
    // example of how to escaping the ~ char
    ["u", "1009:0b8e7a1a4bdba24c911d10e9fc12417d420807488510dbd4fcd8b43e9a66ad74:c1-~3~d4-~6"] // c tag = "1~3" and d tag = "4~6"
  ],
  // ...other fields
}
```
