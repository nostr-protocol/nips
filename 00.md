NIP-00
======

Thread
------

`draft` `optional` `author:arthurfranca`

Defines a standard way to build and load threads.

## Original Post

The original post (OP) by default is a `kind:31111` event for social clients. It is similar to a `kind:1`
event because it allows just plaintext, but it is only used
to start a thread, i.e. when not replying to another event.

It can be edited because it is a parameterized replaceable event.
However, replies and other events reference it by its `id`,
which means editing it will restart the thread as a penalty,
losing all its previous replies, reactions and other references.

Other event kinds such as `kind:30023` "Long-form Content" can be used to start a thread
(also referenced by `id`), except for `kind:1` events, which are used only when replying.

Example:

```js
{
  "kind": 31111,
  "tags": [],
  "content": "Ping",
  ...other fields
}
```

## Reply

A reply is a `kind:1` event, considering social clients. It can be another event kind for other use cases.

It MUST have an `o` tag referencing the OP's `id`, with a required recommended relay (where the OP was found).

It MUST have an `e` tag referencing the `id` of the event one is replying to, be it an OP or a reply. It SHOULD have a recommended relay.

Example:

```js
{
  "kind": 1,
  "tags": [
    ["o", "<OP's id>", "<recommended relay>"],
    ["e", "<id of the event I'm replying to>", "<recommended relay>"]
  ],
  "content": "Pong",
  ...other fields
}
```

### Special Cases

Sometimes a (parameterized) replaceable OP event is meant to be edited
without losing its replies and other references.
The [NIP-53](53.md) `kind:30311` "Live Event" is an example.

In these cases, use an `a` tag instead of the `e` one when replying.
The `o` tag MUST include a 4th array item with "address" value to indicate it
is referencing a replaceable event address (kind:pubkey:d-tag).

## Thread Relays

By convention, thread relays are the OP author's `read` (inbox) relays, following [NIP-65](65.md).
They are limited to the first two `read` relays.

All replies (even from the OP author) should be published both to the reply author's `write`
relays and to the thread relays.

All replies are expected to be loaded from the thread relays.

Some NIPs may explicitly specify thread relays on the OP event as is the case of "Live Events", for example.

## Mentions

Event mentions, both on OPs or on replies, can be inlined using [NIP-21](21.md)
or else be inside a `q` tag referencing the mentioned event `id` with a required recommended relay.
It can include a 4th array item with "address" value to indicate it
is referencing a replaceable event address.

## Legacy

If [NIP-10](10.md) markers were used, use NIP-10 rules instead to load and reply to the thread.
